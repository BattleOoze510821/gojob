{"version":3,"sources":["webpack:///./src/api/TraceApi.js","webpack:///./src/views/Dashboard.vue?8799","webpack:///src/views/Dashboard.vue","webpack:///./src/views/Dashboard.vue?2310","webpack:///./src/views/Dashboard.vue","webpack:///./node_modules/core-js/modules/es6.function.name.js","webpack:///./src/views/Dashboard.vue?79cb","webpack:///./src/api/RuntimeApi.js"],"names":["traceApi","_params","request","url","method","params","traceId","_data","data","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","staticStyle","on","handleRuntimeRefresh","_v","padding","_s","runModeName","runtime","startTime","runMode","usableNodeAmount","disabledNodeAmount","_e","usableDBAmount","disabledDBAmount","jobCount","executeNodeCount","triggerTimes","height","slot","handleStatisticRefresh","handleStatisticChange","model","value","callback","$$v","range","expression","style","staticRenderFns","name","loading","methods","res","startLoading","lock","text","target","document","querySelector","background","statisticToday","statisticWeek","statisticMonth","statisticAll","handleChart","myChart","$echarts","init","getElementById","xData","push","item","yData","rate","setOption","color","tooltip","trigger","formatter","h","dataIndex","total","grid","left","right","bottom","containLabel","xAxis","yAxis","series","mounted","computed","role","component","dP","f","FProto","Function","prototype","nameRE","NAME","configurable","get","match","e","runtimeApi"],"mappings":"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","file":"js/chunk-0d0d8ebb.7839b7e5.js","sourcesContent":["import request from '@/utils/request'\r\n\r\nconst traceApi = {}\r\ntraceApi.getTraces = function (_params) {\r\n  return request({\r\n    url: '/traces'\r\n    ,method: 'get'\r\n    ,params: _params\r\n  })\r\n}\r\ntraceApi.getTrace = function (traceId) {\r\n  return request({\r\n    url: '/traces/'+traceId\r\n    ,method: 'get'\r\n  })\r\n}\r\ntraceApi.cleanTrace = function (_data) {\r\n  return request({\r\n    url: '/traces/clean'\r\n    ,method: 'post'\r\n    ,data: _data\r\n  })\r\n}\r\ntraceApi.statisticToday = function () {\r\n  return request({\r\n      url: '/statistic/today'\r\n      , method: 'get'\r\n  })\r\n}\r\ntraceApi.statisticWeek = function () {\r\n  return request({\r\n      url: '/statistic/week'\r\n      , method: 'get'\r\n  })\r\n}\r\ntraceApi.statisticMonth = function () {\r\n  return request({\r\n      url: '/statistic/month'\r\n      , method: 'get'\r\n  })\r\n}\r\ntraceApi.statisticAll = function () {\r\n  return request({\r\n      url: '/statistic/all'\r\n      , method: 'get'\r\n  })\r\n}\r\nexport default traceApi","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-row',{staticClass:\"mgb20\",attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":24}},[_c('el-button',{staticStyle:{\"float\":\"right\",\"margin-right\":\"10px\"},attrs:{\"icon\":\"el-icon-refresh\",\"size\":\"mini\"},on:{\"click\":_vm.handleRuntimeRefresh}},[_vm._v(\"刷新\")])],1)],1),_c('el-row',{staticClass:\"mgb20\",attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":6}},[_c('el-card',{attrs:{\"shadow\":\"hover\",\"body-style\":{padding: '0px'}}},[_c('div',{staticClass:\"grid-content grid-con-4\"},[_c('i',{staticClass:\"el-icon-monitor grid-con-icon\"}),_c('div',{staticClass:\"grid-cont-left\"},[_c('div',{staticClass:\"user-info-list\"},[_vm._v(\"    运行模式：\"+_vm._s(_vm.runModeName))]),_c('div',{staticClass:\"user-info-list\"},[_vm._v(\"    启动时间：\"+_vm._s(_vm.runtime.startTime))]),(_vm.runtime.runMode=='cluster')?_c('div',{staticClass:\"user-info-list\"},[_vm._v(\"\\n                  调度节点：正常\"+_vm._s(_vm.runtime.usableNodeAmount)+\" 、\\n              \"),_c('font',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"故障\"+_vm._s(_vm.runtime.disabledNodeAmount))])],1):_vm._e(),_c('div',{staticClass:\"user-info-list\"},[_vm._v(\"\\n              数据库节点：正常\"+_vm._s(_vm.runtime.usableDBAmount)+\" 、\\n              \"),_c('font',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"故障\"+_vm._s(_vm.runtime.disabledDBAmount))])],1)])])])],1),_c('el-col',{attrs:{\"span\":6}},[_c('el-card',{attrs:{\"shadow\":\"hover\",\"body-style\":{padding: '0px'}}},[_c('div',{staticClass:\"grid-content grid-con-1\"},[_c('i',{staticClass:\"el-icon-news grid-con-icon\"}),_c('div',{staticClass:\"grid-cont-right\"},[_c('div',{staticClass:\"grid-num\"},[_vm._v(_vm._s(_vm.runtime.jobCount))]),_c('div',[_vm._v(\"任务数量\")])])])])],1),_c('el-col',{attrs:{\"span\":6}},[_c('el-card',{attrs:{\"shadow\":\"hover\",\"body-style\":{padding: '0px'}}},[_c('div',{staticClass:\"grid-content grid-con-2\"},[_c('i',{staticClass:\"el-icon-copy-document grid-con-icon\"}),_c('div',{staticClass:\"grid-cont-right\"},[_c('div',{staticClass:\"grid-num\"},[_vm._v(_vm._s(_vm.runtime.executeNodeCount))]),_c('div',[_vm._v(\"执行节点数量\")])])])])],1),_c('el-col',{attrs:{\"span\":6}},[_c('el-card',{attrs:{\"shadow\":\"hover\",\"body-style\":{padding: '0px'}}},[_c('div',{staticClass:\"grid-content grid-con-3\"},[_c('i',{staticClass:\"el-icon-s-operation grid-con-icon\"}),_c('div',{staticClass:\"grid-cont-right\"},[_c('div',{staticClass:\"grid-num\"},[_vm._v(_vm._s(_vm.runtime.triggerTimes))]),_c('div',[_vm._v(\"总调度次数\")])])])])],1)],1),_c('el-card',{attrs:{\"shadow\":\"hover\",\"body-style\":{ height: '304px'}}},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"失败率TOP20\")]),_c('el-button',{staticStyle:{\"float\":\"right\"},attrs:{\"icon\":\"el-icon-refresh\",\"size\":\"small\"},on:{\"click\":_vm.handleStatisticRefresh}},[_vm._v(\"刷新\")]),_vm._v(\" \\n      \"),_c('el-select',{staticStyle:{\"float\":\"right\",\"margin-right\":\"10px\"},attrs:{\"placeholder\":\"请选择\",\"size\":\"small\"},on:{\"change\":_vm.handleStatisticChange},model:{value:(_vm.range),callback:function ($$v) {_vm.range=$$v},expression:\"range\"}},[_c('el-option',{attrs:{\"label\":\"今天\",\"value\":\"today\"}}),_c('el-option',{attrs:{\"label\":\"本周\",\"value\":\"week\"}}),_c('el-option',{attrs:{\"label\":\"本月\",\"value\":\"month\"}}),_c('el-option',{attrs:{\"label\":\"全部\",\"value\":\"all\"}})],1)],1),_c('div',{style:({ height: '300px'}),attrs:{\"id\":\"myChart\"}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-row :gutter=\"20\" class=\"mgb20\">\r\n      <el-col :span=\"24\">\r\n        <el-button\r\n          icon=\"el-icon-refresh\"\r\n          size=\"mini\"\r\n          @click=\"handleRuntimeRefresh\"\r\n          style=\"float: right; margin-right: 10px;\"\r\n        >刷新</el-button>\r\n      </el-col>\r\n    </el-row>\r\n    <el-row :gutter=\"20\" class=\"mgb20\">\r\n      <el-col :span=\"6\">\r\n        <el-card shadow=\"hover\" :body-style=\"{padding: '0px'}\">\r\n          <div class=\"grid-content grid-con-4\">\r\n            <i class=\"el-icon-monitor grid-con-icon\"></i>\r\n            <div class=\"grid-cont-left\">\r\n              <div class=\"user-info-list\">&nbsp;&nbsp;&nbsp;&nbsp;运行模式：{{runModeName}}</div>\r\n              <div class=\"user-info-list\">&nbsp;&nbsp;&nbsp;&nbsp;启动时间：{{runtime.startTime}}</div>\r\n              <div class=\"user-info-list\" v-if=\"runtime.runMode=='cluster'\">\r\n                &nbsp;&nbsp;&nbsp;&nbsp;调度节点：正常{{runtime.usableNodeAmount}} 、\r\n                <font\r\n                  style=\"color:red\"\r\n                >故障{{runtime.disabledNodeAmount}}</font>\r\n              </div>\r\n              <div class=\"user-info-list\">\r\n                数据库节点：正常{{runtime.usableDBAmount}} 、\r\n                <font\r\n                  style=\"color:red\"\r\n                >故障{{runtime.disabledDBAmount}}</font>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n      <el-col :span=\"6\">\r\n        <el-card shadow=\"hover\" :body-style=\"{padding: '0px'}\">\r\n          <div class=\"grid-content grid-con-1\">\r\n            <i class=\"el-icon-news grid-con-icon\"></i>\r\n            <div class=\"grid-cont-right\">\r\n              <div class=\"grid-num\">{{runtime.jobCount}}</div>\r\n              <div>任务数量</div>\r\n            </div>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n      <el-col :span=\"6\">\r\n        <el-card shadow=\"hover\" :body-style=\"{padding: '0px'}\">\r\n          <div class=\"grid-content grid-con-2\">\r\n            <i class=\"el-icon-copy-document grid-con-icon\"></i>\r\n            <div class=\"grid-cont-right\">\r\n              <div class=\"grid-num\">{{runtime.executeNodeCount}}</div>\r\n              <div>执行节点数量</div>\r\n            </div>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n      <el-col :span=\"6\">\r\n        <el-card shadow=\"hover\" :body-style=\"{padding: '0px'}\">\r\n          <div class=\"grid-content grid-con-3\">\r\n            <i class=\"el-icon-s-operation grid-con-icon\"></i>\r\n            <div class=\"grid-cont-right\">\r\n              <div class=\"grid-num\">{{runtime.triggerTimes}}</div>\r\n              <div>总调度次数</div>\r\n            </div>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <el-card shadow=\"hover\" :body-style=\"{ height: '304px'}\">\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span>失败率TOP20</span>\r\n        <el-button\r\n          icon=\"el-icon-refresh\"\r\n          size=\"small\"\r\n          @click=\"handleStatisticRefresh\"\r\n          style=\"float: right;\"\r\n        >刷新</el-button>&nbsp;\r\n        <el-select\r\n          @change=\"handleStatisticChange\"\r\n          v-model=\"range\"\r\n          placeholder=\"请选择\"\r\n          size=\"small\"\r\n          style=\"float: right; margin-right: 10px;\"\r\n        >\r\n          <el-option label=\"今天\" value=\"today\"></el-option>\r\n          <el-option label=\"本周\" value=\"week\"></el-option>\r\n          <el-option label=\"本月\" value=\"month\"></el-option>\r\n          <el-option label=\"全部\" value=\"all\"></el-option>\r\n        </el-select>\r\n      </div>\r\n      <div id=\"myChart\" :style=\"{ height: '300px'}\"></div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport runtimeApi from \"@/api/RuntimeApi\";\r\nimport traceApi from \"@/api/TraceApi\";\r\nimport { Loading } from \"element-ui\";\r\nexport default {\r\n  name: \"dashboard\",\r\n  data() {\r\n    return {\r\n      range: \"today\",\r\n      runModeName: \"\",\r\n      runtime: {},\r\n      loading: {}\r\n    };\r\n  },\r\n  methods: {\r\n    handleRuntimeRefresh() {\r\n      runtimeApi.getRuntime().then(res => {\r\n        if (res.data) {\r\n          this.runtime = res.data;\r\n          if (res.data.runMode === \"standalone\") {\r\n            this.runModeName = \"单机\";\r\n          } else {\r\n            this.runModeName = \"集群\";\r\n          }\r\n        }\r\n      });\r\n    },\r\n    startLoading() {\r\n      this.loading = Loading.service({\r\n        lock: true,\r\n        text: \"统计中... ...\",\r\n        target: document.querySelector(\"#myChart\"),\r\n        background: \"rgba(0,0,0,0.1)\"\r\n      });\r\n    },\r\n    handleStatisticRefresh(){\r\n      this.handleStatisticChange();\r\n    },\r\n    handleStatisticChange() {\r\n      if (\"today\" === this.range) {\r\n        this.statisticToday();\r\n      }\r\n      if (\"week\" === this.range) {\r\n        this.statisticWeek();\r\n      }\r\n      if (\"month\" === this.range) {\r\n        this.statisticMonth();\r\n      }\r\n      if (\"all\" === this.range) {\r\n        this.statisticAll();\r\n      }\r\n    },\r\n    statisticToday() {\r\n      this.startLoading();\r\n      traceApi\r\n        .statisticToday()\r\n        .then(res => {\r\n          if (res.data) {\r\n            this.handleChart(res.data);\r\n          }\r\n          this.loading.close();\r\n        })\r\n        .catch(error => {\r\n          this.loading.close();\r\n        });\r\n    },\r\n    statisticWeek() {\r\n      this.startLoading();\r\n      traceApi\r\n        .statisticWeek()\r\n        .then(res => {\r\n          if (res.data) {\r\n            this.handleChart(res.data);\r\n          }\r\n          this.loading.close();\r\n        })\r\n        .catch(error => {\r\n          this.loading.close();\r\n        });\r\n    },\r\n    statisticMonth() {\r\n      this.startLoading();\r\n      traceApi\r\n        .statisticMonth()\r\n        .then(res => {\r\n          if (res.data) {\r\n            this.handleChart(res.data);\r\n          }\r\n          this.loading.close();\r\n        })\r\n        .catch(error => {\r\n          this.loading.close();\r\n        });\r\n    },\r\n    statisticAll() {\r\n      this.startLoading();\r\n      traceApi\r\n        .statisticAll()\r\n        .then(res => {\r\n          if (res.data) {\r\n            this.handleChart(res.data);\r\n          }\r\n          this.loading.close();\r\n        })\r\n        .catch(error => {\r\n          this.loading.close();\r\n        });\r\n    },\r\n    handleChart(data) {\r\n      var myChart = this.$echarts.init(document.getElementById(\"myChart\"));\r\n      let xData = [];\r\n      let yData = [];\r\n      for (let i = 0; i < data.length; i++) {\r\n        let item = data[i];\r\n        xData.push(item.name);\r\n        yData.push(item.rate);\r\n      }\r\n      myChart.setOption({\r\n        color: [\"#3398DB\"],\r\n        tooltip: {\r\n          trigger: \"axis\",\r\n          formatter(params) {\r\n            let item = params[0];\r\n            let dataIndex = item.dataIndex;\r\n            let h = \"<div><p>\" + data[dataIndex].name + \"</p></div>\";\r\n            h += \"<div><p>调度次数：\" + data[dataIndex].total + \"</p></div>\";\r\n            h +=\r\n              \"<div><p>调度成功次数：\" + data[dataIndex].succeed + \"</p></div>\";\r\n            h +=\r\n              \"<div><p>调度失败次数：\" + data[dataIndex].failed + \"</p></div>\";\r\n            h += \"<div><p>调度失败率：\" + data[dataIndex].rate + \"% </p></div>\";\r\n            return h;\r\n          }\r\n        },\r\n        grid: {\r\n          left: \"3%\",\r\n          right: \"4%\",\r\n          bottom: \"3%\",\r\n          containLabel: true\r\n        },\r\n        xAxis: [\r\n          {\r\n            type: \"category\",\r\n            data: xData,\r\n            axisLine: { lineStyle: { color: \"#008acd\" } },\r\n            axisLabel: {\r\n              interval: 0,\r\n              formatter: function(value, index) {\r\n                return value;\r\n              }\r\n            }\r\n          }\r\n        ],\r\n        yAxis: [\r\n          {\r\n            type: \"value\",\r\n            axisLabel: {\r\n              show: true,\r\n              interval: \"auto\",\r\n              formatter: \"{value} %\"\r\n            },\r\n            show: true\r\n          }\r\n        ],\r\n        series: [\r\n          {\r\n            name: \"执行失败率\",\r\n            type: \"bar\",\r\n            barWidth: 25,\r\n            data: yData\r\n          }\r\n        ]\r\n      });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.handleRuntimeRefresh();\r\n    this.statisticToday();\r\n  },\r\n  computed: {\r\n    role() {\r\n      return this.name === \"admin\" ? \"超级管理员\" : \"普通用户\";\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.el-row {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.grid-content {\r\n  display: flex;\r\n  align-items: center;\r\n  height: 100px;\r\n}\r\n\r\n.grid-cont-left {\r\n  margin-left: 10px;\r\n  flex: 1;\r\n  text-align: left;\r\n  font-size: 12px;\r\n  color: #999;\r\n}\r\n\r\n.grid-cont-right {\r\n  flex: 1;\r\n  text-align: center;\r\n  font-size: 12px;\r\n  color: #999;\r\n}\r\n\r\n.grid-num {\r\n  font-size: 30px;\r\n  font-weight: bold;\r\n}\r\n\r\n.grid-con-icon {\r\n  font-size: 50px;\r\n  width: 100px;\r\n  height: 100px;\r\n  text-align: center;\r\n  line-height: 100px;\r\n  color: #fff;\r\n}\r\n\r\n.grid-con-1 .grid-con-icon {\r\n  background: rgb(45, 140, 240);\r\n}\r\n\r\n.grid-con-1 .grid-num {\r\n  color: rgb(45, 140, 240);\r\n}\r\n\r\n.grid-con-2 .grid-con-icon {\r\n  background: rgb(100, 213, 114);\r\n}\r\n\r\n.grid-con-2 .grid-num {\r\n  color: rgb(45, 140, 240);\r\n}\r\n\r\n.grid-con-3 .grid-con-icon {\r\n  background: rgb(242, 94, 67);\r\n}\r\n\r\n.grid-con-3 .grid-num {\r\n  color: rgb(242, 94, 67);\r\n}\r\n\r\n.grid-con-4 .grid-con-icon {\r\n  background: #909399;\r\n}\r\n\r\n.grid-con-4 .grid-num {\r\n  color: #909399;\r\n}\r\n\r\n.user-info {\r\n  display: flex;\r\n  align-items: center;\r\n  padding-bottom: 20px;\r\n  border-bottom: 2px solid #ccc;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.user-avator {\r\n  width: 120px;\r\n  height: 120px;\r\n  border-radius: 50%;\r\n}\r\n\r\n.user-info-cont {\r\n  padding-left: 50px;\r\n  flex: 1;\r\n  font-size: 14px;\r\n  color: #999;\r\n}\r\n\r\n.user-info-cont div:first-child {\r\n  font-size: 30px;\r\n  color: #222;\r\n}\r\n\r\n.user-info-list {\r\n  font-size: 12px;\r\n  color: #000;\r\n  line-height: 17px;\r\n}\r\n\r\n.user-info-list span {\r\n  margin-left: 70px;\r\n}\r\n\r\n.mgb20 {\r\n  margin-bottom: 10px;\r\n}\r\n.mgt20 {\r\n  margin-top: 20px;\r\n}\r\n\r\n.todo-item {\r\n  font-size: 14px;\r\n}\r\n\r\n.todo-item-del {\r\n  text-decoration: line-through;\r\n  color: #999;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dashboard.vue?vue&type=template&id=34bb95d4&scoped=true&\"\nimport script from \"./Dashboard.vue?vue&type=script&lang=js&\"\nexport * from \"./Dashboard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Dashboard.vue?vue&type=style&index=0&id=34bb95d4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"34bb95d4\",\n  null\n  \n)\n\nexport default component.exports","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=style&index=0&id=34bb95d4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=style&index=0&id=34bb95d4&scoped=true&lang=css&\"","import request from '@/utils/request'\r\n\r\nconst runtimeApi = {}\r\nruntimeApi.getRuntime = function () {\r\n  return request({\r\n    url: '/runtimes'\r\n    , method: 'get'\r\n  })\r\n}\r\nruntimeApi.getRunmode = function () {\r\n  return request({\r\n    url: '/runtimes/runmode'\r\n    , method: 'get'\r\n  })\r\n}\r\n\r\nexport default runtimeApi"],"sourceRoot":""}